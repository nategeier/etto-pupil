
<etto-logged-in-nav></etto-logged-in-nav>
<etto-verify-modal redirect-to="/etto"></etto-verify-modal>
<div class="container-full etto-bgcolor-secondary">
  <div class="row">
    <div ng-class="user.auth.canCreateCourses ? 'col-md-12' : 'col-sm-12'" class="nopad">
      <div etto-update-company="etto-update-company" class="leaderboard etto-bgcolor-light">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-6">
            <div class="col-sm-12">
              <h3 id="title" editable-textarea="company.leaderboard.title" buttons="no" blur="submit" onaftersave="updateLeaderboard()" class="etto-color-primary">{{company.leaderboard.title}}</h3>
              <h4 id="subtite" editable-textarea="company.leaderboard.subtitle" buttons="no" blur="submit" onaftersave="updateLeaderboard()" class="etto-color-secondary">{{company.leaderboard.subtitle}}</h4>
            </div>
          </div>
          <div id="head-img" class="col-sm-12 col-md-6"><img style="width:100%;" src="{{company.leaderboard.imgUrl}}" etto-asset-library-modal="etto-asset-library-modal" ng-click="updateMainImg()" class="img-responsive default-lg pull-right img-uploadable"/></div>
        </div>
      </div>
      <div class="etto-courses col-sm-8">
        <div ng-show="usersCourses[0]" class="main-holder">
          <div ng-show="err" class="alert alert-danger">
            <p>{{err}}</p>
          </div>
          <div etto-color="etto-color" ng-repeat="course in usersCourses | filter:searchCourse" class="animate-repeat">
            <div ng-class="user.auth.canCreateCourses ? 'col-sm-6 col-lg-4' : 'col-sm-6 col-md-3 col-lg-2'" class="nopad">
              <div ng-click="openCourse(course)" class="etto-course-holder etto-bgcolor-light img-rounded"><img src="{{course.thumb}}" class="img-responsive course-thumb img-rounded"/>
                <div ng-if="course._record">
                  <div ng-show="course._record.progress.bookmark === course._record.progress.totalBlocks &amp;&amp; course._record.progress.totalBlocks !== 1" class="etto-certificate etto-color-accent img-rounded"> 
                    <div etto-certificate="etto-certificate"></div>
                  </div>
                </div>
                <div class="row"> 
                  <div class="col-xs-12">
                    <h4 class="etto-color-primary">{{course.title}}</h4>
                    <p class="etto-color-secondary">{{course.subtitle}}</p>
                  </div>
                </div>
                <div ng-show="!course._record" class="progress etto-bgcolor-light">
                  <div role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100" style="width: 1%;" class="progress-bar etto-bgcolor-accent"></div>
                </div>
                <div ng-show="course._record" class="progress etto-bgcolor-light">
                  <div ng-show="course._record.progress.totalBlocks &gt; 1" role="progressbar" aria-valuenow="{{(course._record.progress.bookmark/course._record.progress.totalBlocks) * 100}}" aria-valuemin="0" aria-valuemax="100" style="width: {{(course._record.progress.bookmark/course._record.progress.totalBlocks) * 100}}%;" class="progress-bar etto-bgcolor-accent"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div ng-show="!usersCourses[0] &amp;&amp; user.auth.canInvite" etto-on-boarding="etto-on-boarding" class="col-sm-8"></div>
      <div ng-show="user.auth.canCreateCourses" class="col-sm-4 col-sm-4">
        <div class="panel etto-bgcolor-light">
          <div class="panel-heading etto-bgcolor-lightgrey">
            <h3 class="modal-title etto-color-primary">Composed Courses</h3>
            <input type="text" ng-model="searchComposedCourse" placeholder="Search Courses" class="form-control"/>
          </div>
          <div class="list-group">
            <div ng-if="!createdCourses[0]">
              <div etto-add-course="etto-add-course" ng-click="addCourse()" class="list-group-item etto-bgcolor-lightgrey etto-bgcolor-light-hover">
                <h4 class="etto-color-accent">Create a Course!</h4>
              </div>
            </div>
            <div etto-color="etto-color" ng-repeat="course in createdCourses | filter:searchComposedCourse">
              <div class="etto-composed-course list-group-item">
                <div class="etto-course-box"><a href="/course/edit/{{ course._id }}">
                    <div class="row">
                      <div class="col-xs-5 col-sm-5"><img src="{{course.thumb}}" class="img-responsive user-course-thumb img-rounded"/></div>
                      <div class="col-xs-7 col-sm-7">
                        <h5 class="etto-color-primary">{{course.title}}</h5>
                      </div>
                    </div></a>
                  <button etto-remove-course="etto-remove-course" type="button" ng-click="removeCourse(course._id, course.title)" class="close aria-hidden pull-right delete-course"><i class="fa fa-trash-o etto-color-secondary"></i></button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>