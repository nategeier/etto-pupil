
<etto-logged-in-nav></etto-logged-in-nav>
<div class="container-full etto-edit-tier">
  <div etto-update-company="etto-update-company" class="row">
    <div class="col-sm-12 col-md-5">
      <h3 id="title" editable-textarea="tier.title" buttons="no" blur="submit" onaftersave="updateTier()" class="etto-color-primary">{{tier.title || 'Title'}}</h3>
      <h4 id="subtite" editable-textarea="tier.internalId" buttons="no" blur="submit" onaftersave="updateTier()" class="etto-color-secondary">{{tier.internalId || 'Optional ID'}}</h4>
      <p>Courses are binded to the tiers not the users.</p>
    </div>
    <div ng-show="saved" class="alert alert-success">
      <p>saved</p>
    </div>
    <div class="col-sm-12 col-md-7 hidden-sm hidden-xs">
      <div style="background-image: url('/images/site/connections.jpg');" class="main-img-container"></div>
    </div>
  </div>
  <div class="row etto-bgcolor-light">
    <div class="col-sm-12">
      <h3>Company's courses</h3>
      <p>Available courses to add to your Departments</p>
      <table class="table-striped table">
        <thead class="etto-bgcolor-primary etto-color-light">
          <tr>
            <th>Course</th>
            <th>Add to Tier</th>
            <th>Add to all Lower Tiers</th>
            <th>Priority</th>
            <th>Make a Copy</th>
            <th> </th>
            <th> </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="course in companyCourses | orderBy: 'priority'" class="soft-open">
            <td>{{course.title}}</td>
            <td>
              <div toggle-switch="toggle-switch" model="course.ison" on-change="changeCourse(course)"></div>
            </td>
            <td>
              <button type="button" ng-click="addToAllLowerTiers(course)" class="btn btn-default btn-sm">Add to all tiers</button>
            </td>
            <td>
              <input type="number" ng-model="course.priority" ng-blur="changeCoursePriority(course)" class="priority"/>
            </td>
            <td>
              <div ng-click="duplicateCourse(course)" class="btn btn-default btn-sm">Duplicate</div>
            </td>
            <td><a ui-sref="editCourse({courseId:course._id})"><i class="fa fa-pencil-square-o"></i></a></td>
            <td>
              <button etto-remove-course="etto-remove-course" type="button" ng-click="removeCourse(course._id, course.title)" class="close aria-hidden pull-right delete-course">&times;</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>