etto-logged-in-nav

.container
  .row
    .col-xs-12.col-md-8

      .col-xs-12.col-sm-5.col-md-5
        h2 {{currentTier.title}}
        
      .col-xs-12.col-sm-7.col-md-7.report-btns

        .col-xs-4.col-sm-4.col-md-4
          .report-btn(etto-add-tier, ng-click="addTier()")
            i.fa.fa-sitemap.fa-2x
            br
            small Add Tiers
        .col-xs-4.col-sm-4.col-md-4
          .report-btn(etto-invite-user-modal, ng-click="inviteUser()")
            i.fa.fa-user.fa-2x
            br
            small Add Users
        .col-xs-4.col-sm-4.col-md-4
          .report-btn
            a(href="/tier/edit/{{ currentTier._id }}") 
              i.fa.fa-edit.fa-2x
              br
              small Edit Tier


      .statBox.col-xs-12.col-md-12.col-sm-12
        .col-xs-3.col-sm-3.col-md-3.stat.statholder
          p2 {{tierReport.totalUsers}}
          br
          small.dark-grey Total Users
        .col-xs-3.col-sm-3.col-md-3.stat.statholder
          p2 {{tierReport.courses.length}}
          br
          small.dark-grey Total Courses
        .col-xs-3.col-sm-3.col-md-3.stat.statholder
          p2 {{tierReport.totalTaken}}
          br
          small.dark-grey Completed
        .col-xs-3.col-sm-3.col-md-3.statholder
          p2 {{tierReport.totalProgress}}%
          br
          small.dark-grey Overall

        .clearfix

        
      .col-md-12
        div(ng-show="!children[0]")
          p No tiers have been added yet
        div(ng-show="children[0]")
          div(ng-repeat= 'tier in children')
            .col-xs-12.col-sm-6.col-md-6
              .course-holder(sink-in, ng-click ="viewChildren('/report/{{tier._id}}')")
                .pad20
                  .row
                    .col-md-9
                      h4 {{tier.title}}
                    .col-md-3
                      .pull-right
                        p {{tier.totalUsers}}
                        i.fa.fa-user
                        
                    .col-md-12
                      .progress
                        .progress-bar(role="progressbar", aria-valuenow="{{(tier.totalTaken/tier.totalToTake) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(tier.totalTaken/tier.totalToTake) * 100}}%;")
                        
                    .clearfix
              .clearfix
        div(ng-show="!children[0]")
          h4(ng-show="!currentTier._children[0]") Users on this tier
          div(ng-repeat= 'user in users')
            .user-box.col-md-6
              a(href = "/settings/{{user._id}}")
                .pad20
                  .row
                    .col-xs-4
                      img.img-circle.user-thumb(ng-show="user.avatarUrl", src= "{{user.avatarUrl}}")
                      i.fa.fa-user.fa-3x.center-block(ng-show="!user.avatarUrl")
                    .col-xs-8
                      div.cap-first.pull-right(ng-show="user.name") {{user.name}}
                      div(ng-show="!user.name")
                        h5.cap-first {{user.email[0]}}
                        br
                        small.text-warning Pending


    .col-xs-12.col-sm-6.col-md-3.report-progress.side-panel

      .modal-header
        h4.modal-title Course Report
      .col-md-12
        p.pull-left Overall
        p.pull-right  {{tierReport.totalTaken}}/{{tierReport.totalToTake}}
        .clearfix
        .progress
          .progress-bar(role="progressbar", aria-valuenow="{{(tierReport.totalTaken/tierReport.totalToTake) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(tierReport.totalTaken/tierReport.totalToTake) * 100}}%;")
        div(ng-repeat="course in tierReport.courses")
          .col-md-12
            p.pull-left {{course.title}}
            p.pull-right  {{course.completed.length}}/{{course.completed.length + course.notCompleted.length}}
          .clearfix
          .col-md-12
            .progress
              .progress-bar(role="progressbar", aria-valuenow="{{(course.completed.length/(course.completed.length + course.notCompleted.length)) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(course.completed.length/(course.completed.length + course.notCompleted.length)) * 100}}%;")
      
    .col-xs-12.col-sm-6.col-md-3(ng-show="children[0]")
      h4 Search Users:
      .input-group
        input.form-control(etto-search-user, type="text", ng-model="userSearch", placeholder="User full name or email", ng-change="searchUser()")
        .input-group-btn
          button.btn.btn-default
            i.fa.fa-search
      div(ng-repeat="user in foundUsers")
        a.btn.btn-default.w100(href="/settings/{{user._id}}") {{user.name}}

      h4(ng-show="currentTier._children[0]") Managers on this tier
      h4(ng-show="!currentTier._children[0]") Users on this tier

      div(ng-repeat= 'user in users')
        .user-box
          a(href = "/settings/{{user._id}}")

            .row
              .col-xs-4
                img.img-circle.user-thumb(height="80", ng-show="user.avatarUrl", src= "{{user.avatarUrl}}")
                i.fa.fa-user.fa-3x.center-block(ng-show="!user.avatarUrl")
              .col-xs-8
                .col-xs-12
                  h5.cap-first.pull-right(ng-show="user.name") {{user.name}} {{user.overallPercent}}
                  div(ng-show="!user.name")
                    h5.cap-first.pull-right {{user.email[0]}}
                    small.text-warning Pending
                .col-xs-12
                  .progress
                    .progress-bar(role="progressbar", aria-valuenow="{{user.overallPercent}}", aria-valuemin="0", aria-valuemax="100", style="width: {{user.overallPercent}}%;")


                      
