etto-logged-in-nav
.container-full
  .row
    .left-holder.col-xs-12.col-md-9
      .row
        .report-head.col-md-12
          .row
            a.col-xs-12.col-sm-5.col-md-5(href="/tier/edit/{{ currentTier._id }}")
              h2 {{currentTier.title}}
              
            .col-xs-12.col-sm-7.col-md-7.report-btns
              .col-xs-4.col-sm-4.col-md-4.nopad
                .report-btn(etto-add-tier, ng-click="addTier()")
                  i.fa.fa-sitemap.fa-2x
                  br
                  small Add Tiers
              .col-xs-4.col-sm-4.col-md-4.nopad
                .report-btn(etto-invite-user-modal, ng-click="inviteUser()")
                  i.fa.fa-user.fa-2x
                  br
                  small Add Users
              a.col-xs-4.col-sm-4.col-md-4.nopad(href="/tier/edit/{{ currentTier._id }}") 
                .report-btn
                  
                  i.fa.fa-edit.fa-2x
                  br
                  small Edit Tier
      .row
        .statBox.col-xs-12.col-md-12.col-sm-12
          .col-xs-6.col-sm-3.col-md-3.stat.statholder
            .statTxt {{tierReport.totalUsers}}
            small.dark-grey Total Users
          .col-xs-6.col-sm-3.col-md-3.stat.statholder
            .statTxt {{tierReport.courses.length}}
            small.dark-grey Total Courses
          .col-xs-6.col-sm-3.col-md-3.stat.statholder
            .statTxt {{tierReport.totalTaken}}
            small.dark-grey Completed
          .col-xs-6col-sm-3.col-md-3.statholder
            .statTxt {{tierReport.totalProgress}}%
            small.dark-grey Overall
          .clearfix
      .row(ng-show="children[0]")
        .col-md-12.tier-holder
          div(class="animate-repeat", ng-repeat= 'tier in children')
            .col-xs-12.col-sm-6.col-md-6.col-lg-4
              button.close.aria-hidden(type="button", ng-click="removeTier(tier)", etto-remove-tier) &times;
              .row
                .tier-box(sink-in, ng-click ="viewChildren('/report/{{tier._id}}')")
                  .pad20
                    .row
                      .col-md-10
                        h4 {{tier.title}}
                        small # {{tier.internalId}}
                      .col-md-2.pull-left
                        p.pull-left {{tier.totalUsers}}
                        i.fa.fa-user
                          
                      .col-md-12
                        .progress
                          .progress-bar(role="progressbar", aria-valuenow="{{(tier.totalTaken/tier.totalToTake) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(tier.totalTaken/tier.totalToTake) * 100}}%;")
      .row(ng-show="!children[0]")
        .tier-holder
          div(class="animate-repeat", ng-repeat= 'user in users')
            .tier-box.col-sm-6.col-md-4(sink-in)
              a(href = "/settings/{{user._id}}")
                .row
                  .col-xs-3
                    img.img-circle.user-thumb(height="80", ng-show="user.avatarUrl", src= "{{user.avatarUrl}}")
                    i.fa.fa-user.fa-3x.center-block(ng-show="!user.avatarUrl")
                  .col-xs-9
                    .col-xs-12
                      h5.cap-first(ng-show="user.name") {{user.name}}
                      div(ng-show="!user.name")
                        h5.cap-first.pull-right {{user.emails[0]}}
                        small.text-warning.pull-right Pending
                    .col-xs-12
                      .progress
                        .progress-bar(role="progressbar", aria-valuenow="{{user.overallPercent}}", aria-valuemin="0", aria-valuemax="100", style="width: {{user.overallPercent}}%;")


    .col-xs-12.col-sm-12.col-md-3.report-progress.side-panel
      .modal-header
        h4.modal-title Course Report
      .col-md-12
        p.pull-left Overall
        p.pull-right  {{tierReport.totalTaken}}/{{tierReport.totalToTake}}
        .clearfix
        .row
          .col-md-2
            a(ng-if="!showCourseReport", href="#", ng-click="showCourseReportToggle()")
              i.fa.fa-caret-right.fa-2x
            a(ng-if="showCourseReport", href="#", ng-click="showCourseReportToggle()")
              i.fa.fa-sort-down.fa-2x
          .col-md-10
            .progress
              .progress-bar(role="progressbar", aria-valuenow="{{(tierReport.totalTaken/tierReport.totalToTake) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(tierReport.totalTaken/tierReport.totalToTake) * 100}}%;")
        div(ng-if="showCourseReport")
          div(ng-repeat="course in tierReport.courses")
            .col-md-12
              p.pull-left {{course.title}}
              p.pull-right  {{course.completed.length}}/{{course.completed.length + course.notCompleted.length}}
            .clearfix
            .col-md-12
              .progress
                .progress-bar(role="progressbar", aria-valuenow="{{(course.completed.length/(course.completed.length + course.notCompleted.length)) * 100}}", aria-valuemin="0", aria-valuemax="100", style="width: {{(course.completed.length/(course.completed.length + course.notCompleted.length)) * 100}}%;")
    .col-xs-12.col-sm-6.col-md-3.side-panel(ng-show="children[0]")
      .modal-header
        h4.modal-title Users
      .modal-body
        .input-group
          input.form-control(etto-search-user, type="text", ng-model="userSearch", placeholder="User full name or email", ng-change="searchUser()")
          .input-group-btn
            button.btn.btn-default
              i.fa.fa-search
          
        div(ng-repeat="user in foundUsers")
          a.btn.btn-default.w100(href="/settings/{{user._id}}") {{user.name}}

        h4(ng-show="currentTier._children[0]") Managers on this tier
        h4(ng-show="!currentTier._children[0]") Users on this tier

        div(ng-repeat= 'user in users')
          .row 
            .tier-box.col-md-12(sink-in)
              a(href = "/settings/{{user._id}}")
                .row
                  .col-xs-3
                    img.img-circle.user-thumb(height="80", ng-show="user.avatarUrl", src= "{{user.avatarUrl}}")
                    i.fa.fa-user.fa-3x.center-block(ng-show="!user.avatarUrl")
                  .col-xs-9
                    .col-xs-12
                      h5.cap-first(ng-show="user.name") {{user.name}}
                      div(ng-show="!user.name")
                        h5.cap-first.pull-right {{user.emails[0]}}
                        small.text-warning Pending
                    .col-xs-12
                      .progress
                        .progress-bar(role="progressbar", aria-valuenow="{{user.overallPercent}}", aria-valuemin="0", aria-valuemax="100", style="width: {{user.overallPercent}}%;")


                        
